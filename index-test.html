<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Serper.dev – Coeziv 3.14Δ</title>
  <style>
    :root {
      --bg: #0d1117;
      --panel: #161b22;
      --text: #c9d1d9;
      --accent: #00ffb7;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', sans-serif;
      padding: 2rem 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      color: var(--accent);
      margin-bottom: 0.5rem;
    }
    p {
      color: #9ba1a6;
      margin-bottom: 1rem;
      text-align: center;
    }
    textarea {
      width: 100%;
      max-width: 600px;
      height: 80px;
      background: var(--panel);
      color: white;
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 1rem;
      resize: none;
      outline: none;
    }
    button {
      margin-top: 1rem;
      background: var(--accent);
      color: #000;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      padding: 0.8rem 1.6rem;
      cursor: pointer;
      transition: transform 0.2s;
    }
    button:hover {
      transform: scale(1.05);
    }
    .results {
      margin-top: 2rem;
      width: 100%;
      max-width: 700px;
      background: var(--panel);
      border-radius: 14px;
      padding: 1.5rem;
    }
    .item {
      border-bottom: 1px solid #2c313a;
      padding: 0.8rem 0;
    }
    .item:last-child {
      border-bottom: none;
    }
    .title {
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 0.3rem;
    }
    .meta {
      color: #9ba1a6;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
    }
    .snippet {
      color: #b5bac1;
      font-size: 0.95rem;
    }
  </style>
</head>
<body>
  <h1>Test Serper.dev</h1>
  <p>Verifică ce știri recente returnează Serper.dev pentru o afirmație</p>

  <textarea id="inputText" placeholder="Exemplu: Ion Iliescu a murit"></textarea>
  <button id="searchBtn">Caută în Serper.dev</button>

  <div id="results" class="results" style="display:none;">
    <h3>Rezultate:</h3>
    <div id="output"></div>
  </div>

  <script>
    const btn = document.getElementById("searchBtn");
    const input = document.getElementById("inputText");
    const results = document.getElementById("results");
    const output = document.getElementById("output");

    btn.addEventListener("click", async () => {
      const text = input.value.trim();
      if (!text) return alert("Introdu o afirmație pentru verificare.");
      results.style.display = "block";
      output.innerHTML = "<p>⏳ Caută știri...</p>";

      try {
        const res = await fetch("/api/serper-test", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text })
        });
        const data = await res.json();
        if (!data.results?.length) {
          output.innerHTML = "<p>⚠️ Nicio știre găsită recent.</p>";
          return;
        }

        output.innerHTML = data.results.map(r => `
          <div class="item">
            <div class="title"><a href="${r.link}" target="_blank">${r.title}</a></div>
            <div class="meta">${r.source} — ${r.date}</div>
            <div class="snippet">${r.snippet}</div>
          </div>
        `).join("");
      } catch (e) {
        output.innerHTML = "<p style='color:#ff0055'>❌ Eroare de conexiune cu Serper.dev</p>";
      }
    });
  </script>
</body>
</html>
