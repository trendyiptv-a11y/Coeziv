<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <title>Lotto 7/36 – Hardcore deterministic</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#0b0f14;
      color:#e8eef6;
    }
    main {
      max-width:900px;
      margin:0 auto;
      padding:20px;
    }
    h1 { font-size:20px; margin-bottom:6px; }
    p { color:#9fb0c4; line-height:1.4; }
    .card {
      background:#121924;
      border-radius:14px;
      padding:16px;
      margin-top:14px;
      border:1px solid rgba(255,255,255,.08);
    }
    button {
      padding:10px 14px;
      font-weight:800;
      border-radius:10px;
      border:1px solid rgba(255,255,255,.15);
      background:rgba(255,255,255,.06);
      color:#e8eef6;
      cursor:pointer;
    }
    button:disabled { opacity:.5; cursor:not-allowed; }
    progress { width:100%; height:16px; }
    .mono {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-variant-numeric: tabular-nums;
    }
    .grid {
      display:grid;
      grid-template-columns: repeat(4,1fr);
      gap:8px;
      margin-top:10px;
    }
    .pill {
      background:rgba(255,255,255,.06);
      padding:6px 10px;
      border-radius:999px;
      font-size:13px;
    }
  </style>
</head>
<body>
<main>
  <h1>Lotto 7/36 – Hardcore deterministic</h1>
  <p>
    Enumerare completă a tuturor celor <strong>8.347.680</strong> combinații.
    Fără RNG. Fără aproximații. Doar matematică.
  </p>

  <div class="card">
    <p><strong>Bilet fix:</strong> <span class="mono" id="ticket"></span></p>
    <button id="startBtn">Pornește enumerarea</button>
    <progress id="progress" value="0" max="8347680"></progress>
    <p class="mono" id="status">În așteptare…</p>
  </div>

  <div class="card">
    <strong>Rezultat EXACT</strong>
    <div class="grid mono" id="results"></div>
  </div>
</main>

<script>
  // ===== CONFIG =====
  const TICKET = [3, 7, 11, 18, 22, 29, 34];
  const TSET = new Set(TICKET);
  const TOTAL = 8347680;
  const BATCH = 20000;

  document.getElementById('ticket').textContent = TICKET.join(', ');

  // ===== STARE =====
  let counts = Array(8).fill(0);
  let processed = 0;
  let startTime = 0;

  const progress = document.getElementById('progress');
  const status = document.getElementById('status');
  const resultsDiv = document.getElementById('results');
  const startBtn = document.getElementById('startBtn');

  // ===== CORE: GENERATOR COMBINAȚII =====
  let a=1,b=2,c=3,d=4,e=5,f=6,g=7;

  function nextCombination() {
    if (g < 36) { g++; return true; }
    if (f < 35) { f++; g = f+1; return true; }
    if (e < 34) { e++; f = e+1; g = f+1; return true; }
    if (d < 33) { d++; e = d+1; f = e+1; g = f+1; return true; }
    if (c < 32) { c++; d = c+1; e = d+1; f = e+1; g = f+1; return true; }
    if (b < 31) { b++; c = b+1; d = c+1; e = d+1; f = e+1; g = f+1; return true; }
    if (a < 30) { a++; b = a+1; c = b+1; d = c+1; e = d+1; f = e+1; g = f+1; return true; }
    return false;
  }

  function countHits() {
    let hits = 0;
    if (TSET.has(a)) hits++;
    if (TSET.has(b)) hits++;
    if (TSET.has(c)) hits++;
    if (TSET.has(d)) hits++;
    if (TSET.has(e)) hits++;
    if (TSET.has(f)) hits++;
    if (TSET.has(g)) hits++;
    counts[hits]++;
  }

  function renderResults() {
    resultsDiv.innerHTML = '';
    for (let i=7;i>=0;i--) {
      const el = document.createElement('div');
      el.className = 'pill';
      el.textContent = `${i}/7 → ${counts[i].toLocaleString()}`;
      resultsDiv.appendChild(el);
    }
  }

  function runBatch() {
    const end = Math.min(processed + BATCH, TOTAL);
    while (processed < end) {
      countHits();
      processed++;
      if (!nextCombination()) break;
    }

    progress.value = processed;
    status.textContent = `Procesate: ${processed.toLocaleString()} / ${TOTAL.toLocaleString()}`;
    renderResults();

    if (processed < TOTAL) {
      setTimeout(runBatch, 0);
    } else {
      const sec = ((performance.now() - startTime)/1000).toFixed(2);
      status.textContent += ` | FINAL în ${sec}s`;
      startBtn.disabled = false;
    }
  }

  startBtn.onclick = () => {
    startBtn.disabled = true;
    counts.fill(0);
    processed = 0;
    progress.value = 0;
    a=1;b=2;c=3;d=4;e=5;f=6;g=7;
    startTime = performance.now();
    status.textContent = 'Rulează enumerarea completă…';
    runBatch();
  };
</script>
</body>
</html>
