<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <title>Mega-ciclul Coeziv BTC</title>
  <style>
    body { background:#05060a; color:#e5e7eb; font-family: system-ui; }
    .card { background:#0b1020; border-radius:14px; padding:16px; margin:16px 0; }
    .tag { display:inline-block; padding:6px 10px; border-radius:20px; font-size:13px; }
    .green { color:#22c55e; border:1px solid #22c55e; }
    .blue { color:#3b82f6; border:1px solid #3b82f6; }
    .orange { color:#f59e0b; border:1px solid #f59e0b; }
    .redBox { border:2px solid #ef4444; border-radius:12px; padding:16px; }
  </style>
</head>
<body>

  <h1>Mega-ciclul Coeziv BTC</h1>

  <div class="card">
    <div><strong>Data:</strong> <span id="megaDate">–</span></div>
    <h2 id="megaPhaseLabel">–</h2>

    <div class="tag green" id="structureLabel">–</div>
    <div class="tag blue" id="directionLabel">–</div>
    <div class="tag orange" id="subcyclesLabel">–</div>
  </div>

  <div id="baseMegaCycleCard" class="card redBox" style="display:none;">
    <h3>Bază potențială de mega-ciclu</h3>
    <p>ICC extrem de scăzut – posibilă bază structurală.</p>
  </div>

  <div class="card">
    <div><strong>ICC_BTC:</strong> <span id="iccVal">–</span></div>
    <div><strong>IC Structural:</strong> <span id="structVal">–</span></div>
    <div><strong>IC Flux:</strong> <span id="fluxVal">–</span></div>
    <div><strong>Mega score:</strong> <span id="megaScoreVal">–</span></div>
  </div>

  <script>
    async function fetchJsonSafe(url) {
      try {
        const r = await fetch(url);
        if (!r.ok) return null;
        return await r.json();
      } catch {
        return null;
      }
    }

    async function loadMega() {
      const data = await fetchJsonSafe("/data/ic_btc_mega_latest.json");
      if (!data) return;

      document.getElementById("megaDate").textContent = data.date || "—";
      document.getElementById("megaPhaseLabel").textContent = data.mega_phase_label || "—";

      document.getElementById("structureLabel").textContent = data.structure_label || "—";
      document.getElementById("directionLabel").textContent = data.direction_label || "—";
      document.getElementById("subcyclesLabel").textContent = data.subcycles_label || "—";

      document.getElementById("iccVal").textContent = data.icc ?? "—";
      document.getElementById("structVal").textContent = data.ic_struct ?? "—";
      document.getElementById("fluxVal").textContent = data.ic_flux ?? "—";
      document.getElementById("megaScoreVal").textContent = data.mega_score ?? "—";

      const baseCard = document.getElementById("baseMegaCycleCard");
      baseCard.style.display = data.show_base_card ? "block" : "none";
    }

    loadMega();
  </script>

</body>
</html>
