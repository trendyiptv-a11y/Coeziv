<script>
async function analyzeText() {
  const input = document.getElementById("inputText").value.trim();
  const resultBox = document.getElementById("result");
  resultBox.innerHTML = "Analiză în curs...";

  try {
    const response = await fetch("/.netlify/functions/analyze", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text: input })
    });

    const data = await response.json();

    resultBox.innerHTML = `
      <strong>Rezonanță:</strong> ${data.resonance || "Nedefinit"}<br>
      <strong>Interpretare:</strong> ${data.interpretation || "Nedefinit"}<br>
      <strong>Tip:</strong> ${data.type || "Nedefinit"}<br>
      ${data.message ? `<small>${data.message}</small>` : ""}
    `;
  } catch (err) {
    resultBox.innerHTML = "Eroare la analiză: " + err.message;
  }
}
</script>
