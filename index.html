<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coeziv 3.14Î”</title>
  <style>
    body {background:#0d1117;color:#c9d1d9;font-family:'Segoe UI',sans-serif;text-align:center;padding:2rem}
    textarea {width:90%;max-width:600px;height:90px;background:#161b22;color:#fff;border:1px solid #30363d;
              border-radius:8px;padding:.8rem;font-size:1rem}
    button {background:#00ffb7;border:none;border-radius:10px;color:#000;font-weight:600;
            padding:.7rem 1.2rem;margin-top:1rem;cursor:pointer}
    .card{background:#161b22;border-radius:16px;padding:1.5rem;margin:2rem auto;max-width:700px;text-align:left}
    footer{margin-top:2rem;color:#6e7681}
  </style>
</head>
<body>
  <h1>ğŸ§  Coeziv 3.14Î”</h1>
  <p>Analizor informaÈ›ional â€“ detecteazÄƒ nivelul de coeziune, vibraÈ›ie È™i manipulare semanticÄƒ.</p>

  <textarea id="inputText" placeholder="Introdu afirmaÈ›ia pentru analizÄƒ..."></textarea><br>
  <button id="analyzeBtn">ğŸ” AnalizeazÄƒ InformaÈ›ia</button>

  <div id="result" class="card" style="display:none">
    <h2>ğŸ§© AnalizÄƒ completÄƒ Coeziv 3.14Î”</h2>
    <div id="analysis"></div>
    <div id="confidenceBox"></div>
    <h3>ğŸ” Surse factuale:</h3>
    <ul id="sources"></ul>
  </div>

  <footer>Â© 2025 Coeziv 3.14Î”</footer>

<script>
document.getElementById("analyzeBtn").addEventListener("click", async () => {
  const text = document.getElementById("inputText").value.trim();
  const resDiv = document.getElementById("result");
  resDiv.style.display = "block";
  document.getElementById("analysis").innerText = "â³ AnalizÄƒ Ã®n curs...";

  try {
    const res = await fetch("/api/analyze-web", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    const data = await res.json();
    document.getElementById("analysis").innerHTML = data.analysis || "Eroare: niciun rÄƒspuns semantic.";
    document.getElementById("confidenceBox").innerHTML = `<p><b>Indice de Ã®ncredere:</b> ${data.confidence || 0}%</p>`;
    const ul = document.getElementById("sources");
    ul.innerHTML = "";
    (data.sources || []).forEach(s => {
      const li = document.createElement("li");
      li.innerHTML = `<a href="${s.url}" target="_blank">${s.title}</a>`;
      ul.appendChild(li);
    });
  } catch (err) {
    document.getElementById("analysis").innerText = "âŒ Eroare de conexiune cu motorul semantic.";
  }
});
</script>
</body>
</html>
