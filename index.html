<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coeziv 3.14 ‚Äî Motor de analizƒÉ informa»õionalƒÉ </title>
  <style>
    body {
      background: #0d1117;
      color: #e6edf3;
      font-family: "Segoe UI", sans-serif;
      text-align: center;
      margin: 0;
      padding: 1em;
    }
    h1 {
      color: #00ffb7;
      margin-bottom: 0.1em;
    }
    p {
      color: #9ba1a6;
      margin-top: 0;
    }
    textarea {
      width: 95%;
      max-width: 650px;
      height: 180px;
      background: #161b22;
      color: #c9d1d9;
      border: 1px solid #30363d;
      border-radius: 10px;
      padding: 1em;
      font-size: 1em;
      resize: none;
    }
    button {
      margin-top: 1em;
      background: #00ffb7;
      color: #000;
      border: none;
      border-radius: 8px;
      padding: 0.8em 1.6em;
      cursor: pointer;
      font-weight: bold;
      font-size: 1em;
      transition: background 0.2s;
    }
    button:hover {
      background: #00cc8f;
    }
    .result {
      margin: 1.5em auto;
      width: 95%;
      max-width: 700px;
      background: #161b22;
      padding: 1.5em;
      border-radius: 12px;
      border: 1px solid #30363d;
      text-align: left;
      line-height: 1.5;
      white-space: pre-wrap;
    }
    canvas {
      margin-top: 1em;
      background: #0d1117;
    }
    .verdict-bar {
      margin: 1em auto;
      width: 90%;
      max-width: 500px;
      height: 25px;
      border-radius: 10px;
      transition: background 0.5s;
    }
    .legend {
      margin-top: 0.6em;
      color: #aaa;
      font-size: 0.9em;
    }
    footer {
      margin-top: 1em;
      color: #777;
      font-size: 0.9em;
      .badge {
  background-color: #00ffb7;
  color: #0d1117;
  font-size: 0.7em;
  font-weight: bold;
  padding: 2px 5px;
  border-radius: 6px;
  margin-right: 5px;
}
.badge.gray {
  background-color: #444;
  color: #bbb;
}
.source-item {
  margin: 4px 0;
  animation: fadeIn 0.6s ease-in;
}
      .result-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.2rem;
  width: 95%;
  max-width: 850px;
  background: #161b22;
  border-radius: 16px;
  padding: 1.2rem;
  box-shadow: 0 0 15px rgba(0,255,183,0.12);
  margin: 1.5rem auto;
}

.verdict-panel {
  text-align: center;
  padding: 0.8rem 1rem;
  border-radius: 12px;
  width: 100%;
  background: rgba(255, 255, 255, 0.05);
}

.verdict-title {
  font-size: 1.2rem;
  color: #ffc800;
  font-weight: 600;
  margin: 0;
}

.analysis-text {
  color: #c9d1d9;
  line-height: 1.6;
  text-align: left;
  width: 100%;
  word-wrap: break-word;
  background: #0d1117;
  border-radius: 10px;
  padding: 1rem;
}

.chart-container {
  width: 100%;
  max-width: 650px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #0d1117;
  border-radius: 10px;
  padding: 1rem;
}

#chart {
  width: 100% !important;
  height: auto !important;
}

.legend {
  text-align: center;
  font-size: 0.9rem;
  color: #9ba1a6;
  border-top: 1px solid rgba(255,255,255,0.08);
  padding-top: 0.6rem;
}
    }
  </style>
</head>
<body>
  <h1>Coeziv 3.14</h1>
  <p>Motor de analizƒÉ informa»õionalƒÉ</p>

  <textarea id="textInput" placeholder="Introdu textul pentru analizƒÉ..."></textarea>
  <br />
  <button id="analyzeBtn">AnalizeazƒÉ</button>

  <!-- üîç Rezultate analizƒÉ Coeziv 3.14 -->
<div id="resultsContainer" class="result-box">

  <!-- Verdict general -->
  <div id="verdictBox" class="verdict-panel">
    <h3 id="verdictTitle" class="verdict-title">‚öôÔ∏è AnalizƒÉ √Æn curs...</h3>
  </div>

  <!-- Textul explicativ / rezultat factual -->
  <div id="analysisText" class="analysis-text">
    <p>Aici va apƒÉrea explica»õia completƒÉ dupƒÉ analizƒÉ.</p>
  </div>

  <!-- Grafic cu valorile formulei -->
  <div id="chartContainer" class="chart-container">
    <canvas id="chart"></canvas>
  </div>

  <!-- Legenda -->
  <div id="legendContainer" class="legend">
    ‚úÖ <span style="color:#00ffb7;">Verde = Veridic / Coeziv</span> |
    ‚ö†Ô∏è <span style="color:#ffc800;">Galben = Ambiguu / Incert</span> |
    üî¥ <span style="color:#ff0055;">Ro»ôu = Fals / Manipulator</span>
  </div>

</div>
  <footer>¬© 2025 Coeziv 3.14 </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("chart").getContext("2d");
  const chart = new Chart(ctx, {
    type: "bar",
    data: {
      labels: ["Fc (Coeziune)", "Œî (Vibra»õie)", "Manipulare %"],
      datasets: [{
        label: "Valori analizƒÉ",
        data: [0, 0, 0],
        backgroundColor: ["#00ffb7", "#ffcc00", "#ff3366"]
      }]
    },
    options: {
      scales: {
        y: { beginAtZero: true, max: 6.3, ticks: { color: "#ccc" } },
        x: { ticks: { color: "#ccc" } }
      },
      plugins: { legend: { display: false } }
    }
  });

  const verdictBar = document.getElementById("verdictBar");
  const resultDiv = document.getElementById("result");

  // ‚úÖ verdict text mare
  const verdictText = document.createElement("div");
  verdictText.style.fontSize = "1.4em";
  verdictText.style.fontWeight = "bold";
  verdictText.style.marginTop = "0.8em";
  verdictText.style.transition = "color 0.4s";
  document.body.insertBefore(verdictText, verdictBar);

  document.getElementById("analyzeBtn").addEventListener("click", async () => {
    const text = document.getElementById("textInput").value.trim();
    if (!text) {
      resultDiv.textContent = "‚ö†Ô∏è Introdu un text pentru analizƒÉ.";
      return;
    }

    resultDiv.textContent = "‚è≥ AnalizƒÉ √Æn curs...";
    verdictBar.style.background = "#444";
    verdictText.textContent = "";

    try {
      const response = await fetch("/api/analyze-web", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ textDeAnalizat: text }),
      });

      const data = await response.json();
      if (data.success) {
        const { fc, delta, manipulare, text: rezumat } = data.rezultat;
        resultDiv.textContent = rezumat;

   // üß† Afi»ôƒÉm sursele gƒÉsite automat
  const sourcesDiv = document.getElementById("sources");

if (data.rezultat.surse && data.rezultat.surse.length > 0) {
  sourcesDiv.innerHTML = `<b>üîó Surse verificate:</b><br>` +
    data.rezultat.surse
      .map(
        (s, i) =>
          `<a href="${s.url}" target="_blank" rel="noopener noreferrer" 
            style="color:#00ffb7;text-decoration:none;">
            ${i + 1}. ${s.title || s.url}
          </a>`
      )
      .join("<br>");
} else {
  sourcesDiv.innerHTML = ""; // nu afi»ôƒÉm nimic
} chart.data.datasets[0].data = [fc, delta, manipulare];
        chart.update();

        // üß† Verdict vizual + text logic
        let verdictColor = "#00ffb7";
        let verdictMsg = "‚úÖ Veridic / Coeziv";

        if (rezumat.toLowerCase().includes("fals") || rezumat.toLowerCase().includes("dezinformare")) {
          verdictColor = "#ff3366";
          verdictMsg = "üî¥ Fals logic / Dezinformare";
        } else if (rezumat.toLowerCase().includes("ambiguu") || manipulare > 25) {
          verdictColor = "#ffcc00";
          verdictMsg = "‚ö†Ô∏è Ambiguu / Incomplet";
        } else if (rezumat.toLowerCase().includes("veridic") || manipulare < 20) {
          verdictColor = "#00ffb7";
          verdictMsg = "‚úÖ Veridic / Coeziv";
        }

        verdictBar.style.background = verdictColor;
        verdictText.textContent = verdictMsg;
        verdictText.style.color = verdictColor;
      } else {
        resultDiv.textContent = "‚ùå Eroare: " + data.error;
        verdictText.textContent = "‚ùå Eroare API";
        verdictBar.style.background = "#ff3366";
      }
    } catch (err) {
      resultDiv.textContent = "‚ö†Ô∏è Eroare de conexiune cu motorul GPT.";
      verdictBar.style.background = "#ff3366";
      verdictText.textContent = "‚ö†Ô∏è Eroare conexiune";
      verdictText.style.color = "#ff3366";
    }
  });
</script>
</body>
</html>











