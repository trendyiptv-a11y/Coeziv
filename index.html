<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coeziv 3.14Δ</title>
  <style>
    body {background:#0d1117;color:#c9d1d9;font-family:'Segoe UI',sans-serif;text-align:center;padding:2rem}
    textarea {width:90%;max-width:600px;height:90px;background:#161b22;color:#fff;border:1px solid #30363d;
              border-radius:8px;padding:.8rem;font-size:1rem}
    button {background:#00ffb7;border:none;border-radius:10px;color:#000;font-weight:600;
            padding:.7rem 1.2rem;margin-top:1rem;cursor:pointer}
    .card{background:#161b22;border-radius:16px;padding:1.5rem;margin:2rem auto;max-width:700px;text-align:left}
    footer{margin-top:2rem;color:#6e7681}
  </style>
</head>
<body>
  <h1>🧠 Coeziv 3.14Δ</h1>
  <p>Analizor informațional – detectează nivelul de coeziune, vibrație și manipulare semantică.</p>

  <textarea id="inputText" placeholder="Introdu afirmația pentru analiză..."></textarea><br>
  <button id="analyzeBtn">🔍 Analizează Informația</button>

  <div id="result" class="card" style="display:none">
    <h2>🧩 Analiză completă Coeziv 3.14Δ</h2>
    <div id="analysis"></div>
    <div id="confidenceBox"></div>
    <h3>🔎 Surse factuale:</h3>
    <ul id="sources"></ul>
  </div>

  <footer>© 2025 Coeziv 3.14Δ</footer>

<script>
document.getElementById("analyzeBtn").addEventListener("click", async () => {
  const text = document.getElementById("inputText").value.trim();
  const resDiv = document.getElementById("result");
  resDiv.style.display = "block";
  document.getElementById("analysis").innerText = "⏳ Analiză în curs...";

  try {
    const res = await fetch("/api/analyze-web", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    const data = await res.json();
    document.getElementById("analysis").innerHTML = data.analysis || "Eroare: niciun răspuns semantic.";
    document.getElementById("confidenceBox").innerHTML = `<p><b>Indice de încredere:</b> ${data.confidence || 0}%</p>`;
    const ul = document.getElementById("sources");
    ul.innerHTML = "";
    (data.sources || []).forEach(s => {
      const li = document.createElement("li");
      li.innerHTML = `<a href="${s.url}" target="_blank">${s.title}</a>`;
      ul.appendChild(li);
    });
  } catch (err) {
    document.getElementById("analysis").innerText = "❌ Eroare de conexiune cu motorul semantic.";
  }
});
</script>
</body>
</html>
