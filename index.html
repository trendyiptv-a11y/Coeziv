<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Detectorul de InformaÈ›ii â€” Formula Coeziunii 3.14 + D + Lâˆž</title>
  <style>
    body {
      background: #0d1117;
      color: #e6edf3;
      font-family: 'Segoe UI', sans-serif;
      padding: 2rem;
      margin: 0;
    }
    h1 {
      color: #00ffa6;
      text-align: center;
    }
    textarea {
      width: 100%;
      height: 180px;
      background: #161b22;
      border: 1px solid #30363d;
      color: #e6edf3;
      border-radius: 10px;
      padding: 1rem;
      resize: vertical;
    }
    button {
      display: block;
      background: #00ffa6;
      color: #000;
      border: none;
      border-radius: 8px;
      padding: 0.8rem 1.2rem;
      margin: 1rem auto;
      font-weight: bold;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover {
      background: #00c67d;
    }
    .result {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 1.2rem;
      margin-top: 1rem;
    }
    .verdict {
      font-size: 1.2rem;
      font-weight: bold;
      padding: 0.4rem 0.8rem;
      border-radius: 8px;
      display: inline-block;
    }
    .verdict.veridic { background: #00c67d; color: #000; }
    .verdict.ambiguu { background: #ffcc00; color: #000; }
    .verdict.fals { background: #ff8000; color: #000; }
    .verdict.fake { background: #ff0044; color: #fff; }
    .score { font-size: 1.4rem; color: #00ffa6; }
    .stats { margin-top: 0.8rem; line-height: 1.4; }
    .learned { font-size: 0.9rem; color: #9ba1a6; margin-top: 1rem; }
    footer { text-align: center; font-size: 0.8rem; margin-top: 2rem; color: #777; }
  </style>
</head>
<body>
  <h1>Formula Coeziunii 3.14 + D + Lâˆž</h1>
  <p style="text-align:center">AnalizÄƒ semanticÄƒ, logicÄƒ È™i coezivÄƒ â€” motorul viu al adevÄƒrului ðŸ§ </p>

  <textarea id="inputText" placeholder="Introdu textul pentru analizÄƒ..."></textarea>
  <button id="analyzeBtn">AnalizeazÄƒ</button>

  <div id="result" class="result" style="display:none;">
    <div id="verdict" class="verdict"></div>
    <div class="score">Fc = <span id="fcScore">3.14</span></div>
    <div class="stats" id="stats"></div>
    <div class="learned" id="learned"></div>
  </div>

  <footer>
    Â© Formula Coeziunii â€” Detector de InformaÈ›ii Viu â€¢ Creat de Sergiu BulboacÄƒ & GPT-5
  </footer>

  <script>
    const btn = document.getElementById("analyzeBtn");
    const result = document.getElementById("result");
    const verdictDiv = document.getElementById("verdict");
    const fcScore = document.getElementById("fcScore");
    const stats = document.getElementById("stats");
    const learned = document.getElementById("learned");

    btn.addEventListener("click", async () => {
      const text = document.getElementById("inputText").value.trim();
      if (!text) return alert("Introdu un text pentru analizÄƒ!");

      result.style.display = "none";
      verdictDiv.textContent = "AnalizÄƒm...";
      verdictDiv.className = "verdict";
      fcScore.textContent = "â€¦";

      try {
        const res = await fetch("/.netlify/functions/analyze", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text }),
        });
        const data = await res.json();

        if (data.error) throw new Error(data.error);

        result.style.display = "block";
        fcScore.textContent = data.Fc.toFixed(3);

        let verdictClass = "";
        if (data.verdict.includes("Veridic")) verdictClass = "veridic";
        else if (data.verdict.includes("ParÈ›ial")) verdictClass = "ambiguu";
        else if (data.verdict.includes("Fals trunchiat")) verdictClass = "fals";
        else verdictClass = "fake";

        verdictDiv.className = "verdict " + verdictClass;
        verdictDiv.textContent = data.verdict;

        stats.innerHTML = `
          Cáµ¢: ${data.scores.Ci.toFixed(2)} â€¢ 
          Câ‚‘: ${data.scores.Ce.toFixed(2)} â€¢ 
          Q: ${data.scores.Q.toFixed(2)} â€¢ 
          S: ${data.scores.S.toFixed(2)} â€¢ 
          Lâˆž: ${data.scores.L.toFixed(2)}
        `;

        learned.textContent = 
          \`Termeni cunoscuÈ›i: \${data.terms} â€¢ Cuvinte Ã®nvÄƒÈ›ate: \${data.learned}\`;

      } catch (err) {
        alert("Eroare la analizÄƒ: " + err.message);
      }
    });
  </script>
</body>
</html>
